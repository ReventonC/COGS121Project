<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Account</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="/css/style.min.css" />
    <link rel="stylesheet" href="/css/style.css" />
    <script src="/js/jquery-3.3.1.min.js"></script>
    <script src="/js/js-cookie.js"></script>
    <script src="/js/account.js"></script>
    <script src="/js/vue.js"></script>
</head>

<body>
    <header>
        <div id="brandBox">
            <img onclick="window.location='kitchen'" id="logo" src="/img/logo.png" alt="logo" style="width:50px;height:31px;" />
            <p id="appName">
                <span style="color: #EA4622">Pan</span><span style="color: #9fd8e2">tr</span><span style="color: #F2847A">y</span>
            </p>
        </div>
        <div id="accountBox" onclick="window.location='account'">
            <p>Hello,
                <span id="accountBoxUserName">userName</span>
            </p>
            <img id="avatarImg" src="/img/avatar.png" alt="avatar" style="width:35px; height:35px" />
        </div>
    </header>

    <div class="content">
        <div id="accountSettings">
            <button class="backBtn" onclick="window.location='kitchen'">back</button>
            <div id="app">
                <h1>Account Settings</h1>
                <img id="avatarPic" :src=avatarImgLink style="width:200px; height:200px" />
                <h2>User Name</h2>
                <input v-model="userName">
                <h2>Preferences</h2>
                <label>
                    Add Preference:
                </label>
                <input v-model="newPreference" placeholder="Add preference..." v-on:keyup.enter="addPreference(newPreference)" />
                <ul v-if="isPEmpty()">
                    <li v-for="preference in preferenceList">
                        \{{preference}}
                        <i v-on:click="removePreference(preference)">x</i>
                    </li>
                </ul>
                <ul v-else>
                    <li>
                        No preference.
                    </li>
                </ul>
                <h2>Alergies</h2>
                <label>
                    Add Alergy:
                </label>
                <input v-model="newAlergy" placeholder="Add alergy..." v-on:keyup.enter="addAlergy(newAlergy)" />
                <ul v-if="isAEmpty()">
                    <li v-for="alergy in alergyList">
                        \{{alergy}}
                        <i v-on:click="removeAlergy(alergy)">x</i>
                    </li>
                </ul>
                 <ul v-else>
                    <li>
                        No alergy.
                    </li>
                </ul>
                <button id="updateBtn" v-on:click="updateInfo">Update Changes</button>
                <button id="logOutBtn" onclick="window.location='/'">Log out</button>
            </div>
        </div>
    </div>

    <script> 
        const accountComponent = new Vue({
            el: "#app",
            data: {
                userName: "Test",
                avatarImgLink: "https://api.adorable.io/avatars/285/abott@adorable.png",
                newPreference: "",
                preferenceList: ["Vegetarian", "Vegan"],
                newAlergy: "",
                alergyList: ["Egg", "Nut", "Soy"]
            },
            methods: {
                addPreference: function (preference) {
                    this.preferenceList.push(preference);
                    this.newPreference = "";
                },
                removePreference: function (preference) {
                    for (i = 0; i < this.preferenceList.length; i++) {
                        if (preference === this.preferenceList[i]) {
                            this.preferenceList.splice(i, 1);
                        }
                    }
                },
                addAlergy: function (alergy) {
                    this.alergyList.push(alergy);
                    this.newAlergy = "";
                },
                removeAlergy: function (alergy) {
                    for (i = 0; i < this.alergyList.length; i++) {
                        if (alergy === this.alergyList[i]) {
                            this.alergyList.splice(i, 1);
                        }
                    }
                },
                isPEmpty: function() {
                    return this.preferenceList.length != 0;
                },
                isAEmpty: function() {
                    return this.alergyList.length != 0;
                },
                updateInfo: function() {
                    alert("Account Information Updated!");
                }
            }
        });

    </script>

</body>

</html>